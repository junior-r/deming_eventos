{% load static %}
{% load humanize %}
{% load i18n %}
<!doctype html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport"
          content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <link rel="icon" href="{% static 'Home/images/logo_deming2.png' %}" type="image/png"/>
    {% block title %}
        <title>@{{ current_profile_user.username.capitalize }} | Plataforma de conferencias académicas del Instituto
            Deming</title>
    {% endblock %}
    <link rel="stylesheet" href="https://cdn.datatables.net/1.12.1/css/dataTables.bootstrap5.min.css"/>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/flowbite/1.6.2/flowbite.min.css" rel="stylesheet"/>
    <link rel="stylesheet" href="{% static 'Home/css/DataTables.css' %}">
    <link href='https://unpkg.com/boxicons@2.1.4/css/boxicons.min.css' rel='stylesheet'>
    <link rel="stylesheet" href="{% static 'Users/css/input_file.css' %}">
    {% block styles %}
    {% endblock %}
    <script>
        // On page load or when changing themes, best to add inline in `head` to avoid FOUC
        if (localStorage.getItem('color-theme') === 'dark' || (!('color-theme' in localStorage) && window.matchMedia('(prefers-color-scheme: dark)').matches)) {
            document.documentElement.classList.add('dark');
        } else {
            document.documentElement.classList.remove('dark')
        }
    </script>
</head>
<body class="bg-gray-100 bg-opacity-50 dark:bg-gray-800"
      style="
              background-image: url({% static 'Home/images/logo_deming2.png' %});
              background-repeat: no-repeat;
              background-position: center;
              background-attachment: fixed;
              ">

{% include 'Users/components/navbar.html' %}

<div class="super-container" style="padding-top: 60px;">

    <div class="bg-gray-100 bg-opacity-50 dark:bg-gray-800 dark:bg-opacity-80 mx-auto p-8"
         style="min-height: calc(100vh - 53px);">
        {% block left-sidebar %}
            {% include 'Users/components/sidebar.html' %}
        {% endblock %}

        <div class="container mx-auto w-full py-6" id="content-info">
            {% block content %}
                {% if form.errors %}
                    <div id="toast-danger"
                         class="absolute flex items-center w-full max-w-xl bottom-0 z-10 left-8 p-4 mb-4 text-gray-500 bg-white rounded-lg shadow dark:text-gray-400 dark:bg-gray-800"
                         role="alert">
                        <div class="inline-flex items-center justify-center flex-shrink-0 w-8 h-8 text-red-500 bg-red-100 rounded-lg dark:bg-red-800 dark:text-red-200">
                            <svg aria-hidden="true" class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20"
                                 xmlns="http://www.w3.org/2000/svg">
                                <path fill-rule="evenodd"
                                      d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z"
                                      clip-rule="evenodd"></path>
                            </svg>
                            <span class="sr-only">Error icon</span>
                        </div>
                        <div class="ml-3 text-sm font-normal">
                            <ul>
                                {% for key, value in form.errors.items %}
                                    <li class="flex gap-2">
                                        <svg fill="none" class="w-5 h-5 text-gray-500 dark:text-gray-400"
                                             stroke="currentColor"
                                             stroke-width="1.5" viewBox="0 0 24 24"
                                             xmlns="http://www.w3.org/2000/svg" aria-hidden="true">
                                            <path stroke-linecap="round" stroke-linejoin="round"
                                                  d="M17.25 8.25L21 12m0 0l-3.75 3.75M21 12H3"></path>
                                        </svg>
                                        {{ value }}
                                    </li>
                                {% endfor %}
                            </ul>

                        </div>
                        <button type="button"
                                class="ml-auto -mx-1.5 -my-1.5 bg-white text-gray-400 hover:text-gray-900 rounded-lg focus:ring-2 focus:ring-gray-300 p-1.5 hover:bg-gray-100 inline-flex h-8 w-8 dark:text-gray-500 dark:hover:text-white dark:bg-gray-800 dark:hover:bg-gray-700"
                                data-dismiss-target="#toast-danger" aria-label="Close">
                            <span class="sr-only">Close</span>
                            <svg aria-hidden="true" class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20"
                                 xmlns="http://www.w3.org/2000/svg">
                                <path fill-rule="evenodd"
                                      d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z"
                                      clip-rule="evenodd"></path>
                            </svg>
                        </button>
                    </div>
                {% endif %}
                <div class=" grid grid-cols-2 grid-rows-3 gap-6">
                    <div class="content-info w-full border py-4 px-6 rounded-lg bg-gray-100 dark:bg-gray-700"
                         style="grid-column: 1 / 2; grid-row: 1 / 2">
                        <h3 class="mb-6 flex items-center gap-4 text-4xl font-bold tracking-tight text-gray-900 dark:text-white">
                            {% if request.user.id == current_profile_user.id %}
                                <span>Tu información</span>
                            {% else %}
                                <span>Información de esta persona</span>
                            {% endif %}
                            <svg fill="none" class="w-8 h-8" stroke="currentColor" stroke-width="1.5"
                                 viewBox="0 0 24 24"
                                 xmlns="http://www.w3.org/2000/svg" aria-hidden="true">
                                <path stroke-linecap="round" stroke-linejoin="round"
                                      d="M11.25 11.25l.041-.02a.75.75 0 011.063.852l-.708 2.836a.75.75 0 001.063.853l.041-.021M21 12a9 9 0 11-18 0 9 9 0 0118 0zm-9-3.75h.008v.008H12V8.25z"></path>
                            </svg>
                        </h3>
                        <div class="info-user ml-4 flex flex-wrap gap-4">
                            <img class="rounded-full w-36 h-36" src="{{ current_profile_user.get_picture_profile }}"
                                 alt="Extra large avatar">
                            <div class="info">
                                <p class="mb-1 font-normal text-gray-700 dark:text-gray-400 flex items-center gap-2">
                                    <svg fill="none" class="w-6 w-6" stroke="currentColor" stroke-width="1.5"
                                         viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" aria-hidden="true">
                                        <path stroke-linecap="round"
                                              d="M16.5 12a4.5 4.5 0 11-9 0 4.5 4.5 0 019 0zm0 0c0 1.657 1.007 3 2.25 3S21 13.657 21 12a9 9 0 10-2.636 6.364M16.5 12V8.25"></path>
                                    </svg>
                                    <span>{{ current_profile_user.username }}</span>
                                </p>
                                <p class="mb-1 font-normal text-gray-700 dark:text-gray-400 flex items-center gap-2">
                                    <svg fill="none" class="w-6 w-6" stroke="currentColor" stroke-width="1.5"
                                         viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" aria-hidden="true">
                                        <path stroke-linecap="round" stroke-linejoin="round"
                                              d="M17.982 18.725A7.488 7.488 0 0012 15.75a7.488 7.488 0 00-5.982 2.975m11.963 0a9 9 0 10-11.963 0m11.963 0A8.966 8.966 0 0112 21a8.966 8.966 0 01-5.982-2.275M15 9.75a3 3 0 11-6 0 3 3 0 016 0z"></path>
                                    </svg>
                                    <span>{{ current_profile_user.get_full_name }}</span>
                                </p>
                                <p class="mb-1 font-normal text-gray-700 dark:text-gray-400 flex items-center gap-2">
                                    <svg fill="none" class="w-6 w-6" stroke="currentColor" stroke-width="1.5"
                                         viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" aria-hidden="true">
                                        <path stroke-linecap="round" stroke-linejoin="round"
                                              d="M21.75 6.75v10.5a2.25 2.25 0 01-2.25 2.25h-15a2.25 2.25 0 01-2.25-2.25V6.75m19.5 0A2.25 2.25 0 0019.5 4.5h-15a2.25 2.25 0 00-2.25 2.25m19.5 0v.243a2.25 2.25 0 01-1.07 1.916l-7.5 4.615a2.25 2.25 0 01-2.36 0L3.32 8.91a2.25 2.25 0 01-1.07-1.916V6.75"></path>
                                    </svg>
                                    <span>{{ current_profile_user.email }}</span>
                                </p>
                                <p class="mb-1 font-normal text-gray-700 dark:text-gray-400 flex items-center gap-2">
                                    <svg fill="none" class="w-6 w-6" stroke="currentColor" stroke-width="1.5"
                                         viewBox="0 0 24 24"
                                         xmlns="http://www.w3.org/2000/svg" aria-hidden="true">
                                        <path stroke-linecap="round" stroke-linejoin="round"
                                              d="M16.5 10.5V6.75a4.5 4.5 0 10-9 0v3.75m-.75 11.25h10.5a2.25 2.25 0 002.25-2.25v-6.75a2.25 2.25 0 00-2.25-2.25H6.75a2.25 2.25 0 00-2.25 2.25v6.75a2.25 2.25 0 002.25 2.25z"></path>
                                    </svg>
                                    <span>Último inicio de sesión: {{ current_profile_user.last_login | naturaltime }}</span>
                                </p>
                                <p class="mb-1 font-normal text-gray-700 dark:text-gray-400 flex items-center gap-2">
                                    <svg fill="none" class="w-6 w-6" stroke="currentColor" stroke-width="1.5"
                                         viewBox="0 0 24 24"
                                         xmlns="http://www.w3.org/2000/svg" aria-hidden="true">
                                        <path stroke-linecap="round" stroke-linejoin="round"
                                              d="M12 8.25v-1.5m0 1.5c-1.355 0-2.697.056-4.024.166C6.845 8.51 6 9.473 6 10.608v2.513m6-4.87c1.355 0 2.697.055 4.024.165C17.155 8.51 18 9.473 18 10.608v2.513m-3-4.87v-1.5m-6 1.5v-1.5m12 9.75l-1.5.75a3.354 3.354 0 01-3 0 3.354 3.354 0 00-3 0 3.354 3.354 0 01-3 0 3.354 3.354 0 00-3 0 3.354 3.354 0 01-3 0L3 16.5m15-3.38a48.474 48.474 0 00-6-.37c-2.032 0-4.034.125-6 .37m12 0c.39.049.777.102 1.163.16 1.07.16 1.837 1.094 1.837 2.175v5.17c0 .62-.504 1.124-1.125 1.124H4.125A1.125 1.125 0 013 20.625v-5.17c0-1.08.768-2.014 1.837-2.174A47.78 47.78 0 016 13.12M12.265 3.11a.375.375 0 11-.53 0L12 2.845l.265.265zm-3 0a.375.375 0 11-.53 0L9 2.845l.265.265zm6 0a.375.375 0 11-.53 0L15 2.845l.265.265z"></path>
                                    </svg>
                                    <span>Miembro desde: {{ current_profile_user.date_joined | naturaltime }}</span>
                                </p>
                                {{ current_profile_user.get_role | safe }}
                                {% if current_profile_user.curriculum %}
                                    <a target="_blank" href="{{ current_profile_user.curriculum.url }}"
                                       class="bg-red-100 text-red-800 text-sm font-medium mr-2 px-2.5 py-0.5 rounded dark:bg-red-900 dark:text-red-300">Curriculum</a>
                                {% endif %}
                                {% if current_profile_user.is_referral %}
                                    <a href="{% url 'referral_users' current_profile_user.id %}"
                                       class="bg-indigo-100 text-indigo-800 text-sm font-medium mr-2 px-2.5 py-0.5 rounded dark:bg-indigo-900 dark:text-indigo-300">Reclutados</a>
                                {% endif %}
                            </div>
                        </div>
                    </div>
                    {% if perms.auth.view_permission %}
                        {% if current_user.is_superuser %}
                            <div class="content-info w-full border py-4 px-6 rounded-lg bg-gray-100 dark:bg-gray-700"
                                 style="grid-column: 2 / 3; grid-row: 1 / 3">
                                <div class="labels flex justify-between gap-4 mb-4">
                                    <p class="font-bold text-2xl dark:text-white">Permisos
                                        ({{ current_profile_user.user_permissions.all.count }})</p>
                                    <p class="font-bold text-2xl dark:text-white">Activación</p>
                                </div>
                                <form action="{% url 'assign_perms_user' current_profile_user.id %}" method="post"
                                      class="flex flex-col">
                                    {% csrf_token %}
                                    <ul class="permissions mx-4 mb-4">
                                        {% for permission in permissions %}
                                            <li class="perm flex justify-between gap-4 mt-2">
                                                <div class="perm_info">
                                                    <p class="perm_name text-gray-600 dark:text-gray-300" translate="yes">{{ permission.name }}</p>
                                                </div>
                                                <div class="perm_activation">
                                                    <label class="relative inline-flex items-center cursor-pointer">
                                                        <input type="checkbox" value="{{ permission.id }}"
                                                               name="permisos"
                                                               class="sr-only peer"
                                                                {% if not current_user.is_superuser %}
                                                               disabled
                                                                {% endif %}
                                                                {% if permission in current_profile_user.user_permissions.all or current_profile_user.is_superuser %}
                                                               checked {% endif %}>

                                                        <div class="w-11 h-6 bg-gray-200 rounded-full peer dark:bg-gray-700 peer-focus:ring-4 peer-focus:ring-blue-300 dark:peer-focus:ring-blue-800 peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-0.5 after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all dark:border-gray-600 peer-checked:bg-blue-600"></div>

                                                        <span class="ml-3">
                                                            <span class="bg-red-500 text-white text-xs font-medium px-2.5 py-0.5 rounded dark:bg-red-600 dark:text-white">Inactivo</span>
                                                            <span class="bg-blue-500 text-white text-xs font-medium mr-2 px-2.5 py-0.5 rounded dark:bg-blue-600 dark:text-white">Activo</span>
                                                        </span>
                                                    </label>
                                                </div>
                                            </li>
                                            <hr>
                                        {% endfor %}
                                    </ul>
                                    {% if current_user.is_superuser %}
                                        <button type="submit"
                                                class="text-white sticky bottom-2 bg-blue-700 hover:bg-blue-800 focus:ring-4 focus:ring-blue-300 font-medium rounded-lg text-sm px-5 py-2.5 mr-2 mb-2 dark:bg-blue-600 dark:hover:bg-blue-700 focus:outline-none dark:focus:ring-blue-800">
                                            Guardar
                                        </button>
                                    {% endif %}
                                </form>
                            </div>
                        {% else %}
                            <div class="content-info w-full border py-4 px-6 rounded-lg bg-gray-100 dark:bg-gray-700"
                                 style="grid-column: 2 / 3; grid-row: 1 / 3">
                                <div class="labels flex justify-between gap-4 mb-4">
                                    <p class="font-bold text-2xl dark:text-white">Permisos
                                        ({{ current_profile_user.user_permissions.all.count }})</p>
                                    <p class="font-bold text-2xl dark:text-white">Activación</p>
                                </div>
                                <ul class="permissions mx-4 mb-4">
                                    {% for permission in permissions %}
                                        <li class="perm flex justify-between gap-4 mt-2">
                                            <div class="perm_info">
                                                <p class="perm_name text-gray-600 dark:text-gray-300">{{ permission.name }}</p>
                                            </div>
                                            <div class="perm_activation ml-3 mb-2">
                                                {% if permission in current_profile_user.user_permissions.all %}
                                                    <span class="bg-blue-500 text-white text-xs font-medium px-2.5 py-0.5 rounded dark:bg-blue-600 dark:text-white">Activo</span>
                                                {% else %}
                                                    {% if current_profile_user.is_superuser %}
                                                        <span class="bg-blue-500 text-white text-xs font-medium px-2.5 py-0.5 rounded dark:bg-blue-600 dark:text-white">Activo</span>
                                                    {% else %}
                                                        <span class="bg-red-500 text-white text-xs font-medium px-2.5 py-0.5 rounded dark:bg-red-600 dark:text-white">Inactivo</span>
                                                    {% endif %}
                                                {% endif %}
                                            </div>
                                        </li>
                                        <hr>
                                    {% endfor %}
                                </ul>
                            </div>
                        {% endif %}
                    {% else %}
                        {% if current_user_perms %}
                            <div class="content-info w-full border py-4 px-6 rounded-lg bg-gray-100 dark:bg-gray-700"
                                 style="grid-column: 2 / 3; grid-row: 1 / 3">
                                <div class="labels flex justify-between gap-4 mb-4">
                                    <p class="font-bold text-2xl dark:text-white">Permisos
                                        ({{ current_profile_user.user_permissions.all.count }})</p>
                                    <p class="font-bold text-2xl dark:text-white">Estado</p>
                                </div>
                                <ul class="permissions mx-4 mb-4">
                                    {% for permission in current_user_perms %}
                                        <li class="perm flex justify-between gap-4 mt-2">
                                            <div class="perm_info">
                                                <p class="perm_name text-gray-600 dark:text-gray-300">{{ permission.name }}</p>
                                            </div>
                                            <div class="perm_activation">
                                                <div class="relative inline-flex items-center cursor-pointer">
                                                    <span class="bg-blue-500 text-white text-xs mb-2 font-medium mr-2 px-2.5 py-0.5 rounded dark:bg-blue-600 dark:text-white">Activo</span>
                                                </div>
                                            </div>
                                        </li>
                                        <hr>
                                    {% endfor %}
                                </ul>
                            </div>
                        {% else %}
                            {% if current_profile_user.id == request.user.id %}
                                <div class="content-info w-full border py-4 px-6 rounded-lg bg-gray-100 dark:bg-gray-700">
                                    <div class="content flex justify-center items-center flex-col w-full p-4">
                                        <img src="{% static 'Eventos/images/icons/filter-circle-xmark-solid.svg' %}"
                                             style="width: 10rem" class="mb-4"
                                             alt="ícono de registros no encontrados">
                                        <h1 class="text-3xl font-extrabold dark:text-white">No tienes permisos
                                            asignados</h1>
                                    </div>
                                </div>
                            {% endif %}
                        {% endif %}
                    {% endif %}
                    {% if request.user.id == current_profile_user.id or request.user.is_superuser or perms.Users.change_user %}
                        <div class="content-info border py-4 px-6 rounded-lg bg-gray-100 dark:bg-gray-700"
                             style="grid-column: 1 / 2; grid-row: 2 / 3">
                            <h3 class="mb-6 flex items-center gap-4 text-4xl font-bold tracking-tight text-gray-900 dark:text-white">
                                <span>Editar información</span>
                                <svg fill="none" class="w-8 h-8" stroke="currentColor" stroke-width="1.5"
                                     viewBox="0 0 24 24"
                                     xmlns="http://www.w3.org/2000/svg" aria-hidden="true">
                                    <path stroke-linecap="round" stroke-linejoin="round"
                                          d="M16.862 4.487l1.687-1.688a1.875 1.875 0 112.652 2.652L10.582 16.07a4.5 4.5 0 01-1.897 1.13L6 18l.8-2.685a4.5 4.5 0 011.13-1.897l8.932-8.931zm0 0L19.5 7.125M18 14v4.75A2.25 2.25 0 0115.75 21H5.25A2.25 2.25 0 013 18.75V8.25A2.25 2.25 0 015.25 6H10"></path>
                                </svg>
                            </h3>
                            <div class="info-user ml-4 flex flex-col flex-wrap gap-4">
                                <form method="post" action="" enctype="multipart/form-data" style="max-width: 100%">
                                    {% csrf_token %}
                                    <input type="number" hidden name="user_id" value="{{ current_profile_user.id }}"
                                           readonly>

                                    <div class="relative z-0 w-full mb-6 group">
                                        <div class="container-input">
                                            {% if current_profile_user.get_picture_profile %}
                                                <input type="file" name="profile_image"
                                                       value="{{ current_profile_user.get_picture_profile }}"
                                                       accept="image/jpeg" class="inputfile inputfile-5" id="file-5"
                                                       data-multiple-caption="{count} archivos seleccionados">
                                                <label for="file-5">
                                                    <figure>
                                                        <img src="{% static 'Home/images/user_profile_placeholder.jpg' %}"
                                                             alt="imagen de perfil de usuario">
                                                        <img id="imagenPrevisualizacion"
                                                             alt="Imagen de perfil del usuario"
                                                             loading="lazy"
                                                             src="{{ current_profile_user.get_picture_profile }}">
                                                    </figure>
                                                    <span class="iborrainputfile block mb-2 text-sm font-medium text-gray-900 dark:text-white">{{ form.picture_profile.label }}</span>
                                                </label>
                                            {% else %}
                                                {{ form.profile_image }}
                                                <label for="file-5">
                                                    <figure>
                                                        <img src="{% static 'Home/images/user_profile_placeholder.jpg' %}"
                                                             alt="imagen de perfil de usuario">
                                                        <img id="imagenPrevisualizacion"
                                                             alt="Imagen de perfil del usuario"
                                                             loading="lazy">
                                                    </figure>
                                                    <span class="iborrainputfile block mb-2 text-sm font-medium text-gray-900 dark:text-white">{{ form.picture_profile.label }}</span>
                                                </label>
                                            {% endif %}
                                        </div>
                                    </div>

                                    <div class="grid md:grid-cols-2 md:gap-6">
                                        <div class="relative z-0 w-full mb-6">
                                            <label for="{{ form.username.id_for_label }}"
                                                   class="block mb-2 text-sm font-medium text-gray-900 dark:text-white">
                                                {{ form.username.label }}
                                            </label>
                                            <div class="relative">
                                                <div class="absolute inset-y-0 left-0 flex items-center pl-3 pointer-events-none">
                                                    <svg fill="none" stroke="currentColor"
                                                         class="w-5 h-5 text-gray-500 dark:text-gray-400"
                                                         stroke-width="1.5" viewBox="0 0 24 24"
                                                         xmlns="http://www.w3.org/2000/svg" aria-hidden="true">
                                                        <path stroke-linecap="round"
                                                              d="M16.5 12a4.5 4.5 0 11-9 0 4.5 4.5 0 019 0zm0 0c0 1.657 1.007 3 2.25 3S21 13.657 21 12a9 9 0 10-2.636 6.364M16.5 12V8.25"></path>
                                                    </svg>
                                                </div>
                                                {{ form.username }}
                                            </div>
                                        </div>

                                        <div class="relative z-0 w-full mb-6">
                                            <label for="{{ form.email.id_for_label }}"
                                                   class="block mb-2 text-sm font-medium text-gray-900 dark:text-white">
                                                {{ form.email.label }}
                                            </label>
                                            <div class="relative">
                                                <div class="absolute inset-y-0 left-0 flex items-center pl-3 pointer-events-none">
                                                    <svg aria-hidden="true"
                                                         class="w-5 h-5 text-gray-500 dark:text-gray-400"
                                                         fill="currentColor"
                                                         viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg">
                                                        <path d="M2.003 5.884L10 9.882l7.997-3.998A2 2 0 0016 4H4a2 2 0 00-1.997 1.884z"></path>
                                                        <path d="M18 8.118l-8 4-8-4V14a2 2 0 002 2h12a2 2 0 002-2V8.118z"></path>
                                                    </svg>
                                                </div>
                                                {{ form.email }}
                                            </div>
                                        </div>
                                    </div>

                                    <div class="grid md:grid-cols-2 md:gap-6">
                                        <div class="relative z-0 w-full mb-6">
                                            <label for="{{ form.first_name.id_for_label }}"
                                                   class="block mb-2 text-sm font-medium text-gray-900 dark:text-white">
                                                {{ form.first_name.label }}
                                            </label>
                                            <div class="relative">
                                                <div class="absolute inset-y-0 left-0 flex items-center pl-3 pointer-events-none">
                                                    <svg fill="none" stroke="currentColor"
                                                         class="w-5 h-5 text-gray-500 dark:text-gray-400"
                                                         stroke-width="1.5" viewBox="0 0 24 24"
                                                         xmlns="http://www.w3.org/2000/svg" aria-hidden="true">
                                                        <path stroke-linecap="round" stroke-linejoin="round"
                                                              d="M15.75 6a3.75 3.75 0 11-7.5 0 3.75 3.75 0 017.5 0zM4.501 20.118a7.5 7.5 0 0114.998 0A17.933 17.933 0 0112 21.75c-2.676 0-5.216-.584-7.499-1.632z"></path>
                                                    </svg>
                                                </div>
                                                {{ form.first_name }}
                                            </div>
                                        </div>

                                        <div class="relative z-0 w-full mb-6">
                                            <label for="{{ form.last_name.id_for_label }}"
                                                   class="block mb-2 text-sm font-medium text-gray-900 dark:text-white">
                                                {{ form.last_name.label }}
                                            </label>
                                            <div class="relative">
                                                <div class="absolute inset-y-0 left-0 flex items-center pl-3 pointer-events-none">
                                                    <svg fill="none" stroke="currentColor"
                                                         class="w-5 h-5 text-gray-500 dark:text-gray-400"
                                                         stroke-width="1.5" viewBox="0 0 24 24"
                                                         xmlns="http://www.w3.org/2000/svg" aria-hidden="true">
                                                        <path stroke-linecap="round" stroke-linejoin="round"
                                                              d="M15.75 6a3.75 3.75 0 11-7.5 0 3.75 3.75 0 017.5 0zM4.501 20.118a7.5 7.5 0 0114.998 0A17.933 17.933 0 0112 21.75c-2.676 0-5.216-.584-7.499-1.632z"></path>
                                                    </svg>
                                                </div>
                                                {{ form.last_name }}
                                            </div>
                                        </div>
                                    </div>

                                    <div class="grid md:grid-cols-2 md:gap-6">
                                        <div class="relative z-0 w-full mb-6">
                                            <label for="{{ form.profession.id_for_label }}"
                                                   class="block mb-2 text-sm font-medium text-gray-900 dark:text-white">
                                                {{ form.profession.label }}
                                            </label>
                                            <div class="relative">
                                                <div class="absolute inset-y-0 left-0 flex items-center pl-3 pointer-events-none">
                                                    <svg fill="none" class="w-5 h-5 text-gray-500 dark:text-gray-400"
                                                         stroke="currentColor"
                                                         stroke-width="1.5" viewBox="0 0 24 24"
                                                         xmlns="http://www.w3.org/2000/svg" aria-hidden="true">
                                                        <path stroke-linecap="round" stroke-linejoin="round"
                                                              d="M20.25 14.15v4.25c0 1.094-.787 2.036-1.872 2.18-2.087.277-4.216.42-6.378.42s-4.291-.143-6.378-.42c-1.085-.144-1.872-1.086-1.872-2.18v-4.25m16.5 0a2.18 2.18 0 00.75-1.661V8.706c0-1.081-.768-2.015-1.837-2.175a48.114 48.114 0 00-3.413-.387m4.5 8.006c-.194.165-.42.295-.673.38A23.978 23.978 0 0112 15.75c-2.648 0-5.195-.429-7.577-1.22a2.016 2.016 0 01-.673-.38m0 0A2.18 2.18 0 013 12.489V8.706c0-1.081.768-2.015 1.837-2.175a48.111 48.111 0 013.413-.387m7.5 0V5.25A2.25 2.25 0 0013.5 3h-3a2.25 2.25 0 00-2.25 2.25v.894m7.5 0a48.667 48.667 0 00-7.5 0M12 12.75h.008v.008H12v-.008z"></path>
                                                    </svg>
                                                </div>
                                                {{ form.profession }}
                                            </div>
                                        </div>
                                        <div class="relative z-0 w-full mb-6">
                                            <label for="{{ form.curriculum.id_for_label }}"
                                                   class="block mb-2 text-sm font-medium text-gray-900 dark:text-white">
                                                {{ form.curriculum.label }}
                                            </label>
                                            <input accept="application/pdf, application/vnd.ms-excel"
                                                   name="{{ form.curriculum.html_name }}"
                                                    {% if current_profile_user.curriculum %}
                                                   value="{{ current_profile_user.curriculum.url }}"
                                                    {% endif %}
                                                   class="block w-full text-sm text-gray-900 border border-gray-300 rounded-lg cursor-pointer bg-gray-50 dark:text-gray-400 focus:outline-none dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400"
                                                   id="{{ form.curriculum.id_for_label }}" type="file">
                                            {% if current_profile_user.curriculum %}
                                                <a href="{{ current_profile_user.curriculum.url }}" target="_blank"
                                                   class="mt-1 text-sm text-gray-500 dark:text-gray-300">Ver actual</a>
                                            {% endif %}
                                        </div>
                                    </div>

                                    <div class="relative z-0 w-full mb-6">
                                        <label for="{{ form.interests.id_for_label }}"
                                               class="block mb-2 text-sm font-medium text-gray-900 dark:text-white">
                                            {{ form.interests.label }}
                                        </label>
                                        {{ form.interests }}
                                    </div>

                                    <div class="flex justify-center my-4">
                                        {{ form.captcha }}
                                    </div>

                                    {% if request.user.id != current_profile_user.id and not current_profile_user.is_superuser and perms.Users.change_user %}
                                        <section
                                                class="border p-4 mb-4 rounded-lg border-red-500 bg-red-500 bg-opacity-50">
                                            <div class="grid md:grid-cols-2 md:gap-6">
                                                <div class="relative z-0 w-full mb-6">
                                                    <div class="flex items-center pl-4 border border-gray-200 rounded dark:border-gray-600 mb-2">
                                                        {{ form.is_staff }}
                                                        <label for="{{ form.is_staff.id_for_label }}"
                                                               class="w-full py-4 ml-2 text-sm font-medium text-gray-900 dark:text-gray-300">
                                                            {{ form.is_staff.label }}
                                                        </label>
                                                    </div>
                                                    <p id="{{ form.is_staff.id_for_label }}"
                                                       class="text-xs font-normal text-gray-500 dark:text-gray-300">
                                                        <svg fill="none" class="w-6 h-6" stroke="currentColor"
                                                             stroke-width="1.5"
                                                             viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"
                                                             aria-hidden="true">
                                                            <path stroke-linecap="round" stroke-linejoin="round"
                                                                  d="M12 9v3.75m-9.303 3.376c-.866 1.5.217 3.374 1.948 3.374h14.71c1.73 0 2.813-1.874 1.948-3.374L13.949 3.378c-.866-1.5-3.032-1.5-3.898 0L2.697 16.126zM12 15.75h.007v.008H12v-.008z"></path>
                                                        </svg>
                                                        <span class="text-white">Depende de los que se marque, este usuario podrá o no tener privilegios en el programa</span>
                                                    </p>
                                                </div>

                                                <div class="relative z-0 w-full mb-6">
                                                    <div class="flex items-center pl-4 border border-gray-200 rounded dark:border-gray-600 mb-2">
                                                        {{ form.is_active }}
                                                        <label for="{{ form.is_active.id_for_label }}"
                                                               class="w-full py-4 ml-2 text-sm font-medium text-gray-900 dark:text-gray-300">
                                                            {{ form.is_active.label }}
                                                        </label>
                                                    </div>
                                                    <p id="{{ form.is_active.id_for_label }}"
                                                       class="text-xs font-normal text-gray-500 dark:text-gray-300">
                                                        <svg fill="none" class="w-6 h-6 block" stroke="currentColor"
                                                             stroke-width="1.5"
                                                             viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"
                                                             aria-hidden="true">
                                                            <path stroke-linecap="round" stroke-linejoin="round"
                                                                  d="M12 9v3.75m-9.303 3.376c-.866 1.5.217 3.374 1.948 3.374h14.71c1.73 0 2.813-1.874 1.948-3.374L13.949 3.378c-.866-1.5-3.032-1.5-3.898 0L2.697 16.126zM12 15.75h.007v.008H12v-.008z"></path>
                                                        </svg>
                                                        <span class="text-white">Si desmarca está opción, el usuario no podrá iniciar sesión y tendrá que contactar a un superusuario para que cambie su contraseña y active su cuenta</span>
                                                    </p>
                                                </div>

                                                <div class="relative z-0 w-full mb-6">
                                                    <div class="flex items-center pl-4 border border-gray-200 rounded dark:border-gray-600 mb-2">
                                                        {{ form.is_teacher }}
                                                        <label for="{{ form.is_teacher.id_for_label }}"
                                                               class="w-full py-4 ml-2 text-sm font-medium text-gray-900 dark:text-gray-300">
                                                            {{ form.is_teacher.label }}
                                                        </label>
                                                    </div>
                                                    <p id="{{ form.is_teacher.id_for_label }}"
                                                       class="text-xs font-normal text-gray-500 dark:text-gray-300">
                                                        <svg fill="none" class="w-6 h-6 block" stroke="currentColor"
                                                             stroke-width="1.5"
                                                             viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"
                                                             aria-hidden="true">
                                                            <path stroke-linecap="round" stroke-linejoin="round"
                                                                  d="M12 9v3.75m-9.303 3.376c-.866 1.5.217 3.374 1.948 3.374h14.71c1.73 0 2.813-1.874 1.948-3.374L13.949 3.378c-.866-1.5-3.032-1.5-3.898 0L2.697 16.126zM12 15.75h.007v.008H12v-.008z"></path>
                                                        </svg>
                                                        <span class="text-white">Si maraca este campo, este usuario tendrá acceso gratuito a los eventos que se le asigne como ponente.</span>
                                                    </p>
                                                </div>

                                                <div class="relative z-0 w-full mb-6">
                                                    <div class="flex items-center pl-4 border border-gray-200 rounded dark:border-gray-600 mb-2">
                                                        {{ form.is_referral }}
                                                        <label for="{{ form.is_referral.id_for_label }}"
                                                               class="w-full py-4 ml-2 text-sm font-medium text-gray-900 dark:text-gray-300">
                                                            {{ form.is_referral.label }}
                                                        </label>
                                                    </div>
                                                    <p id="{{ form.is_referral.id_for_label }}"
                                                       class="text-xs font-normal text-gray-500 dark:text-gray-300">
                                                        <svg fill="none" class="w-6 h-6 block" stroke="currentColor"
                                                             stroke-width="1.5"
                                                             viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"
                                                             aria-hidden="true">
                                                            <path stroke-linecap="round" stroke-linejoin="round"
                                                                  d="M12 9v3.75m-9.303 3.376c-.866 1.5.217 3.374 1.948 3.374h14.71c1.73 0 2.813-1.874 1.948-3.374L13.949 3.378c-.866-1.5-3.032-1.5-3.898 0L2.697 16.126zM12 15.75h.007v.008H12v-.008z"></path>
                                                        </svg>
                                                        <span class="text-white">Si maraca este campo, este usuario
                                                            recibirá una comisión predefinida por cada participante que
                                                            reclute.
                                                        </span>
                                                    </p>
                                                </div>
                                            </div>
                                        </section>
                                    {% endif %}
                                    <div class="buttons flex gap- justify-between">
                                        <div class="password-btn">
                                            <a href=""
                                               class="text-white bg-gradient-to-r from-red-400 via-red-500 to-red-600 hover:bg-gradient-to-br focus:ring-4 focus:outline-none focus:ring-red-300 dark:focus:ring-red-800 shadow-lg shadow-red-500/50 dark:shadow-lg dark:shadow-red-800/80 font-medium rounded-lg text-sm px-5 py-2.5 text-center">
                                                Cambiar contraseña
                                            </a>
                                        </div>
                                        <div class="actions-btns">
                                            {% if request.user.id == current_profile_user.id or perms.Users.delete_user or request.user.is_superuser %}
                                                <a href="#" onclick="delete_user({{ current_profile_user.id }})"
                                                   class="text-white bg-red-700 hover:bg-red-800 focus:ring-4 focus:ring-red-300 font-medium rounded-lg text-sm px-5 py-2.5 mr-2 mb-2 dark:bg-red-600 dark:hover:bg-red-700 focus:outline-none dark:focus:ring-red-800">
                                                    Eliminar cuenta
                                                </a>
                                            {% endif %}

                                            <button type="submit"
                                                    class="text-white bg-blue-700 hover:bg-blue-800 focus:ring-4 focus:ring-blue-300 font-medium rounded-lg text-sm px-5 py-2.5 mr-2 mb-2 dark:bg-blue-600 dark:hover:bg-blue-700 focus:outline-none dark:focus:ring-blue-800">
                                                Actualizar
                                            </button>
                                        </div>
                                    </div>
                                </form>
                            </div>
                        </div>
                    {% endif %}

                    {% if current_profile_user.is_teacher %}
                        <div class="content-info border py-4 px-6 rounded-lg bg-gray-100 dark:bg-gray-700"
                             style="grid-column: 1 / 3; grid-row: 3 / 4">
                            <h3 class="mb-6 flex items-center gap-4 text-4xl font-bold tracking-tight text-gray-900 dark:text-white">
                                <span>Cursos impartidos ({{ events_teacher.all.count }})</span>
                                <svg fill="none" class="w-8 h-8" stroke="currentColor" stroke-width="1.5"
                                     viewBox="0 0 24 24"
                                     xmlns="http://www.w3.org/2000/svg" aria-hidden="true">
                                    <path stroke-linecap="round" stroke-linejoin="round"
                                          d="M4.26 10.147a60.436 60.436 0 00-.491 6.347A48.627 48.627 0 0112 20.904a48.627 48.627 0 018.232-4.41 60.46 60.46 0 00-.491-6.347m-15.482 0a50.57 50.57 0 00-2.658-.813A59.905 59.905 0 0112 3.493a59.902 59.902 0 0110.399 5.84c-.896.248-1.783.52-2.658.814m-15.482 0A50.697 50.697 0 0112 13.489a50.702 50.702 0 017.74-3.342M6.75 15a.75.75 0 100-1.5.75.75 0 000 1.5zm0 0v-3.675A55.378 55.378 0 0112 8.443m-7.007 11.55A5.981 5.981 0 006.75 15.75v-1.5"></path>
                                </svg>
                            </h3>


                            {% if events_teacher %}
                                <div class="events_teacher flex gap-4 flex-wrap">
                                    {% for event in events_teacher %}
                                        <div class="w-full relative max-w-sm bg-white border border-gray-200 rounded-lg shadow dark:bg-gray-800 dark:border-gray-700">
                                            {% if event.active %}
                                                <span class="absolute top-2 left-2 bg-green-100 text-green-800 text-xs font-medium mr-2 px-2.5 py-0.5 rounded-full dark:bg-green-900 dark:text-green-300">Activo</span>
                                            {% else %}
                                                <span class="absolute top-2 left-2 bg-red-100 text-red-800 text-xs font-medium mr-2 px-2.5 py-0.5 rounded-full dark:bg-red-900 dark:text-red-300">Inactivo</span>
                                            {% endif %}
                                            <a href="{% url 'view_event' event.id %}">
                                                <img class="p-8 rounded-t-lg mx-auto" loading="lazy"
                                                     src="{{ event.get_logo }}"
                                                     alt="product image"/>
                                            </a>
                                            <div class="px-5 pb-5">
                                                <a href="#" class="mb-4 block">
                                                    <h5 class="text-xl font-semibold tracking-tight text-gray-900 dark:text-white">
                                                        {{ event.title.capitalize }}
                                                    </h5>
                                                </a>
                                                <div class="dates mb-4 flex gap-2 items-center">
                                                    <div class="start_date">
                                                        <p class="dark:text-white">
                                                            <span class="bg-blue-100 text-blue-800 text-xs font-medium inline-flex items-center px-2.5 py-0.5 rounded dark:bg-gray-700 dark:text-blue-400 border border-blue-400">
                                                                <svg fill="none" class="w-3 h-3 mr-1"
                                                                     stroke="currentColor" stroke-width="1.5"
                                                                     viewBox="0 0 24 24"
                                                                     xmlns="http://www.w3.org/2000/svg"
                                                                     aria-hidden="true">
                                                                    <path stroke-linecap="round" stroke-linejoin="round"
                                                                          d="M6.75 3v2.25M17.25 3v2.25M3 18.75V7.5a2.25 2.25 0 012.25-2.25h13.5A2.25 2.25 0 0121 7.5v11.25m-18 0A2.25 2.25 0 005.25 21h13.5A2.25 2.25 0 0021 18.75m-18 0v-7.5A2.25 2.25 0 015.25 9h13.5A2.25 2.25 0 0121 11.25v7.5m-9-6h.008v.008H12v-.008zM12 15h.008v.008H12V15zm0 2.25h.008v.008H12v-.008zM9.75 15h.008v.008H9.75V15zm0 2.25h.008v.008H9.75v-.008zM7.5 15h.008v.008H7.5V15zm0 2.25h.008v.008H7.5v-.008zm6.75-4.5h.008v.008h-.008v-.008zm0 2.25h.008v.008h-.008V15zm0 2.25h.008v.008h-.008v-.008zm2.25-4.5h.008v.008H16.5v-.008zm0 2.25h.008v.008H16.5V15z"></path>
                                                                </svg>
                                                              {{ event.start_date.isoformat }}
                                                            </span>
                                                        </p>
                                                    </div>

                                                    <svg fill="none" class="w-5 h-5 mr-1" stroke="white"
                                                         stroke-width="1.5"
                                                         viewBox="0 0 24 24"
                                                         xmlns="http://www.w3.org/2000/svg" aria-hidden="true">
                                                        <path stroke-linecap="round" stroke-linejoin="round"
                                                              d="M17.25 8.25L21 12m0 0l-3.75 3.75M21 12H3"></path>
                                                    </svg>

                                                    <div class="final_date">
                                                        <p class="dark:text-white">
                                                            <span class="bg-blue-100 text-blue-800 text-xs font-medium inline-flex items-center px-2.5 py-0.5 rounded dark:bg-gray-700 dark:text-blue-400 border border-blue-400">
                                                                <svg fill="none" class="w-3 h-3 mr-1"
                                                                     stroke="currentColor" stroke-width="1.5"
                                                                     viewBox="0 0 24 24"
                                                                     xmlns="http://www.w3.org/2000/svg"
                                                                     aria-hidden="true">
                                                                    <path stroke-linecap="round" stroke-linejoin="round"
                                                                          d="M6.75 3v2.25M17.25 3v2.25M3 18.75V7.5a2.25 2.25 0 012.25-2.25h13.5A2.25 2.25 0 0121 7.5v11.25m-18 0A2.25 2.25 0 005.25 21h13.5A2.25 2.25 0 0021 18.75m-18 0v-7.5A2.25 2.25 0 015.25 9h13.5A2.25 2.25 0 0121 11.25v7.5m-9-6h.008v.008H12v-.008zM12 15h.008v.008H12V15zm0 2.25h.008v.008H12v-.008zM9.75 15h.008v.008H9.75V15zm0 2.25h.008v.008H9.75v-.008zM7.5 15h.008v.008H7.5V15zm0 2.25h.008v.008H7.5v-.008zm6.75-4.5h.008v.008h-.008v-.008zm0 2.25h.008v.008h-.008V15zm0 2.25h.008v.008h-.008v-.008zm2.25-4.5h.008v.008H16.5v-.008zm0 2.25h.008v.008H16.5V15z"></path>
                                                                </svg>
                                                              {{ event.final_date.isoformat }}
                                                            </span>
                                                        </p>
                                                    </div>
                                                </div>

                                                <div class="description">
                                                    <p class="dark:text-gray-400">
                                                        {{ event.addressed_to }}
                                                    </p>
                                                </div>

                                                <div class="flex items-center justify-between">
                                                    <span class="text-3xl font-bold text-gray-900 dark:text-white">${{ event.price.to_eng_string }}</span>
                                                    <a href="{% url 'view_event' event.id %}"
                                                       class="text-white flex bg-blue-700 hover:bg-blue-800 focus:ring-4 focus:outline-none focus:ring-blue-300 font-medium rounded-lg text-sm px-5 py-2.5 text-center dark:bg-blue-600 dark:hover:bg-blue-700 dark:focus:ring-blue-800">
                                                        Ver más
                                                        <svg fill="none" class="w-5 h-5 mr-1" stroke="white"
                                                             stroke-width="1.5"
                                                             viewBox="0 0 24 24"
                                                             xmlns="http://www.w3.org/2000/svg" aria-hidden="true">
                                                            <path stroke-linecap="round" stroke-linejoin="round"
                                                                  d="M17.25 8.25L21 12m0 0l-3.75 3.75M21 12H3"></path>
                                                        </svg>
                                                    </a>
                                                </div>
                                            </div>
                                        </div>
                                    {% endfor %}
                                </div>
                            {% else %}
                                <div class="content flex justify-center items-center flex-col w-full p-4">
                                    <img src="{% static 'Eventos/images/icons/filter-circle-xmark-solid.svg' %}"
                                         style="width: 10rem" class="mb-4"
                                         alt="ícono de registros no encontrados">
                                    <h1 class="text-3xl font-extrabold dark:text-white">
                                        No ha dictado cursos aún.
                                    </h1>
                                </div>
                            {% endif %}
                        </div>
                    {% endif %}

                </div>
            {% endblock content %}
        </div>
    </div>
</div>

{% block footer %}
{% endblock %}

<script src="https://unpkg.com/boxicons@2.1.4/dist/boxicons.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/flowbite/1.6.2/flowbite.min.js"></script>
<!-- jQuery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
<!-- DataTable -->
<script src="https://cdn.datatables.net/1.12.1/js/jquery.dataTables.min.js"></script>
<script src="https://cdn.datatables.net/1.12.1/js/dataTables.bootstrap5.min.js"></script>
<script src="//cdn.jsdelivr.net/npm/sweetalert2@11"></script>
<script src="{% static 'Home/js/darkMode.js' %}"></script>
<script src="{% static 'Home/js/dataTables.js' %}"></script>

{% block js %}
    <script src="{% static 'Users/js/input_file.js' %}"></script>

    <script>
        const Toast = Swal.mixin({
            toast: true,
            position: 'top-end',
            showConfirmButton: false,
            timer: 2000,
            timerProgressBar: true,
        })
        {% if current_user.is_superuser %}
            Toast.fire({
                icon: 'success',
                title: 'Puedes asignar permisos'
            })
        {% elif current_user.is_staff %}
            Toast.fire({
                icon: 'warning',
                title: 'No puedes asignar permisos'
            })
        {% endif %}
    </script>

    <script>
        function delete_user(id) {
            Swal.fire({
                title: '¿Estás seguro?',
                text: "Esta acción es irreversible. ¡Esperamos cambies de decisión!",
                icon: 'warning',
                showCancelButton: true,
                confirmButtonColor: '#d33',
                cancelButtonColor: '#3085d6',
                confirmButtonText: 'Borrar cuenta',
                cancelButtonText: 'NO borrar cuenta'
            }).then((result) => {
                if (result.value) {
                    window.location.href = '/users/delete_user/' + id + '/';
                }
            })
        }
    </script>

    <script>
        const input1 = document.getElementById("new_password1");
        const input2 = document.getElementById("new_password2");

        // Agregamos un event listener al input1 para detectar cuando se escribe algo en él
        input1.addEventListener("input", function () {
            // Verificamos si el valor del input1 es diferente de una cadena vacía
            if (input1.value !== "") {
                // Hacemos que el input2 sea requerido
                input1.required = true;
                input2.required = true;
            } else {
                // Si el input1 está vacío, quitamos el requerido del input2
                input1.required = false;
                input2.required = false;
            }
        });
        // Agregamos un event listener al input1 para detectar cuando se escribe algo en él
        input2.addEventListener("input", function () {
            // Verificamos si el valor del input1 es diferente de una cadena vacía
            if (input2.value !== "") {
                // Hacemos que el input2 sea requerido
                input2.required = true;
                input1.required = true;
            } else {
                // Si el input1 está vacío, quitamos el requerido del input2
                input2.required = false;
                input1.required = false;
            }
        });
    </script>
{% endblock %}

{% if messages %}
    {% for m in messages %}
        <script>
            Swal.fire({
                title: '{{ m.tags|capfirst }}',
                text: '{{ m }}',
                icon: '{{ m.tags }}'
            })
        </script>
    {% endfor %}
{% endif %}
</body>
</html>